# JuiceFS 对比 S3FS

[S3FS](https://github.com/s3fs-fuse/s3fs-fuse) 是一个 C++ 开发的开源工具，可以将 S3 对象存储通过 FUSE 挂载到本地，像本地磁盘一样进行读写访问。除了 AWS S3，它还支持所有兼容 S3 API 的对象存储。

在基本功能方面，S3FS 与 JuiceFS 都能通过 FUSE-POSIX 将对象存储 Bucket 挂载到本地使用。但在功能细节和技术实现上，二者有着本质的不同。

## 产品定位

S3FS 是一种实用工具，可以方便地将对象存储 Bucket 挂载到本地，以用户熟悉的方式进行读写，面向那些对性能和网络延迟不敏感的一般使用场景。

JuiceFS 是分布式文件系统，具有独特的数据管理方式以及一系列针对高性能、可靠性和安全性等方面的技术优化，主要解决海量数据的存储需求。

## 系统架构

S3FS 没有针对文件对象做优化处理，它就像一个本地与对象存储之间的访问通道，本地挂载点看到的内容与对象存储浏览器上看到的一致，这样可以很方便地实现在本地使用云端存储。但从另一个角来看，正是因为这种简单的架构，使得 S3FS 对文件的检索和读写都需要与对象存储直接交互，网络延迟对性能和用户体验都会有较大的影响。

JuiceFS 采用数据和元数据分离的技术架构，任何文件都会先按照特定规则拆分成数据块再上传到对象存储，相应的元数据会存储在独立的数据库中。这样带来的好处是对文件的检索以及文件名等元信息的修改可以直接与响应速度更快的数据库交互，避开了与对象存储交互的网络延迟影响。

另外，在大文件的处理方面，虽然 S3FS 可以通过分块上传解决大文件的传输问题，但对象存储的特性决定了追加和改写文件需要重写整个对象。对于几十几百 GB 甚至 TB 级的大文件来说，重复上传势必会浪费大量的时间和带宽资源。

JuiceFS 则规避了此类问题，不论单个文件尺寸多大，在上传之前都会预先在本地按照特定规则拆分成数据块(默认4MiB)。对任何文件的改写和追加最终都会定位在特定的数据块上，只需要针对性地重新上传特定的数据块即可，大大降低了时间和带宽资源的浪费。

## 功能特性

| | JuiceFS | S3FS |
| -- | -- | -- |
| 数据存储 | S3、其他对象存储、WebDAV、本地磁盘 | S3 |
| 元数据存储 | 独立数据库 | 无 |
| 系统 | Linux、macOS、Windows | Linux、macOS |
| POSIX 兼容 | 完全兼容 | 部分兼容 |
| 本地缓存 | ✓ | ✓ |
| 共享挂载 | ✓ | ✕ |
| 硬链接 | ✓ | ✕ |
| 文件分块 | ✓ | ✕ |
| 原子操作 | ✓ | ✕ |
| 强一致性 | ✓ | ✕ |
| 数据压缩 | ✓ | ✕ |
| 数据加密 | ✓ | ✕ |
| 开发语言 | Go | C++ |
| 开源协议 | Apache License 2.0 | GPL-2.0 License |

## 补充说明

[OSSFS](https://github.com/aliyun/ossfs) 是 S3FS 的衍生品，二者的功能特性和用法完全一致。

